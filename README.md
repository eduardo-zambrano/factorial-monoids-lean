# Lean 4 Formalization: Factorial Monoids via Labeled Factorization Counts

A Lean 4 formalization of the paper "Characterizing Factorial Monoids via Labeled Factorization Counts" by Eduardo Zambrano.

## Overview

This project proves that ordinary multiplication on natural numbers can be characterized purely through counting labeled factorizations. The main result shows that under three axiomatic properties (PP-D, PP-P, and CFI), a reduced atomic commutative monoid is factorial (has unique factorization).

## Main Results

| Theorem | Description | Status |
|---------|-------------|--------|
| `cor_factorial` | Main theorem: CFI implies factorial | **Proven** |
| `prop_val_additive` | Additivity of p-adic valuations | **Proven** |
| `cor_squarefree` | Squarefree diagnostic lemma | **Proven** |
| `atoms_are_prime` | CFI implies atoms are prime | **Proven** |
| `prop_coprime_mult` | Coprime multiplicativity (Prop 7.2) | **Proven** |
| `Theorem_Local_SB` | Local stars-and-bars (Thm 6.2) | **Proven** |

## Key Definitions

- **F_k(m)**: The number of ordered k-tuples (m_1, ..., m_k) with product m
- **PP-D** (Powers Distinct): The map e -> p^e is injective for atoms p
- **PP-P** (Prime Powers factorially closed): If x*y is in the submonoid generated by p, then so are x and y
- **CFI** (Coprime parts Factor Independently): A bijection F_2(x) x F_2(y) -> F_2(x*y) for coprime x, y
- **Reduced**: Units are exactly {1}
- **Atomic**: Every non-unit factors into atoms
- **Factorial**: Unique factorization into atoms

## File Structure

```
MultiplicationProject/
  Basic.lean                    -- Core definitions (Sections 2-3)
  Utilities.lean               -- Transfer lemmas and helpers
  LocalPurity.lean             -- CFI implies PP-P (Section 5)
  LocalCharacterization.lean   -- Stars-and-bars on prime powers (Section 6)
  GlobalMultiplicativity.lean  -- Global multiplicativity (Section 7)
  MasterFormula_v2_aristotle.lean -- Master formula and main theorem (Section 8)
  AtomsArePrime_v2_aristotle.lean -- Atoms are prime under CFI
```

## Formalization Status

| Section | Result | Status |
|---------|--------|--------|
| Definitions (Sections 2-3) | Core definitions | Complete |
| Local Purity (Section 5) | CFI implies PP-P | Complete |
| Local Stars-and-Bars (Section 6) | Thm 6.2 | Complete |
| Global Multiplicativity (Section 7) | Prop 7.2 | Complete |
| Master Formula (Section 8) | Main theorem | **Complete** |

## Building

Requires Lean 4 v4.24.0 and Mathlib.

```bash
# Get Mathlib cache (required before first build)
lake exe cache get

# Build the project
lake build
```

## Dependencies

- Lean 4 v4.24.0
- Mathlib (specific commit in lakefile.lean)

## Author

Eduardo Zambrano

## License

Apache 2.0

## Acknowledgments

Some proofs were completed with assistance from [Aristotle](https://harmonic.fun/) (Harmonic's AI prover).
